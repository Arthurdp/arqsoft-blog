<!doctype html>

<html lang="en">

<head>
  <title>fzf - command-line fuzzy finder - Arquitetura de Software</title>
  <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="description" content="Documentação arquitetural produzida pelas turmas de Arquitetura de Software - Computação @ UFCG." />
<meta name="author" content="Example" /><meta property="og:title" content="fzf - command-line fuzzy finder" />
<meta property="og:description" content="Autores Este documento foi produzido por Bruno Roberto Silva de Siqueira.
 Matrícula: 118110854 Contato: bruno.siqueira@ccc.ufcg.edu.br Projeto documentado: https://github.com/junegunn/fzf  Descrição Arquitetural &ndash; Filtro para commandline Este documento - feito através de texto e diagramas aos moldes do modelo c4 - descreve o programa para commandline fzf, sua interação com o shell, outros programas, e até comunicação com plugins." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://joaoarthurbm.github.io/arqsoft-blog/posts/fzf/" />
<meta property="article:published_time" content="2020-10-07T00:00:00-03:00" />
<meta property="article:modified_time" content="2020-10-07T00:00:00-03:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="fzf - command-line fuzzy finder"/>
<meta name="twitter:description" content="Autores Este documento foi produzido por Bruno Roberto Silva de Siqueira.
 Matrícula: 118110854 Contato: bruno.siqueira@ccc.ufcg.edu.br Projeto documentado: https://github.com/junegunn/fzf  Descrição Arquitetural &ndash; Filtro para commandline Este documento - feito através de texto e diagramas aos moldes do modelo c4 - descreve o programa para commandline fzf, sua interação com o shell, outros programas, e até comunicação com plugins."/>

<meta name="generator" content="Hugo 0.75.1" />
    

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://joaoarthurbm.github.io/arqsoft-blog/fontawesome/css/all.min.css" />
  
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab|Ruda" />
  
  
  <link rel="stylesheet" type="text/css" href="https://joaoarthurbm.github.io/arqsoft-blog/css/styles.css" /></head>

<body>
  <div id="container">
    <header>
      <h1>
                <a href="https://joaoarthurbm.github.io/arqsoft-blog/">Arquitetura de Software</a>
            </h1>

      <ul id="social-media">
             <li>
               <a href="https://github.com/joaoarthurbm/arqsoft-blog" title="GitHub">
               <i class="fab fa-github fa-lg"></i>
               </a>
             </li>
      </ul>
      
      <p><em>Conteúdo produzido pelas turmas de Arquitetura de Software - Computação @ UFCG</em></p>
      
    </header>

    
<nav>
    <ul>
        
    </ul>
</nav>


    <main>




<article>

    <h1>fzf - command-line fuzzy finder</h1>

    
      <aside>
    <ul>
        <li>
            <time class="post-date" datetime="2020-10-07T00:00:00-03:00">Oct 7, 2020</time>
        </li>
        

        

        <li>4 minutes read</li>
    </ul>
</aside>

    

    


    <h1 id="autores">Autores</h1>
<p>Este documento foi produzido por Bruno Roberto Silva de Siqueira.</p>
<ul>
<li>Matrícula: 118110854</li>
<li>Contato: <a href="mailto:bruno.siqueira@ccc.ufcg.edu.br">bruno.siqueira@ccc.ufcg.edu.br</a></li>
<li>Projeto documentado: <a href="https://github.com/junegunn/fzf">https://github.com/junegunn/fzf</a></li>
</ul>
<h1 id="descrição-arquitetural----filtro-para-commandline">Descrição Arquitetural &ndash; Filtro para commandline</h1>
<p>Este documento - feito através de texto e diagramas aos moldes do <a href="https://c4model.com">modelo c4</a> - descreve o programa para commandline <a href="https://github.com/junegunn/fzf">fzf</a>, sua interação com o shell, outros programas, e até comunicação com plugins.</p>
<ul>
<li>Importante destacar que haverá um foco apenas no shell unix.</li>
</ul>
<h2 id="descrição-geral-sobre-o-fzf">Descrição Geral sobre o fzf</h2>
<p>O fzf é um programa utilizado para filtrar informações de um input no shell, de maneira interativa, inclusive com suporte a multiseleção e previews.</p>
<p>Ao receber uma entrada qualquer de texto, invocado o comando <code>fzf</code>, o usuário pode digitar uma string qualquer para executar uma busca do tipo <a href="https://en.wikipedia.org/wiki/Approximate_string_matching">fuzzy</a>. Filtradas as linhas relevantes, o usuário poderá selecionar a linha desejada, a qual será devolvida ao shell.</p>
<p>Apesar de aparentemente simplório, todas as operações acima descritas são completamente customizáveis. É possível utilizar regexes, em vez de fuzzy; selecionar múltiplas linhas; executar operações nas linhas antes de devolvê-las ao shell; expor previews; customizar a exibicão das linhas; dentre várias outras customizações.</p>
<p>Também, por ser um programa de commandline, operando com strings puras, a integracão com outras ferramentas, via plugins, é bastante fácil de ser implementada via sub processos.</p>
<p>Dados os pontos acima expostos, o fzf é uma ferramenta bastante poderosa para a commandline. Age em muitos casos como uma interface interativa para alguns programas de commandline, um <em>de facto</em> <a href="https://en.wikipedia.org/wiki/Text-based_user_interface">TUI</a>, como para <a href="https://github.com/bigH/git-fuzzy">git</a>, <a href="https://github.com/ms-jpq/sad">sed</a>, <a href="https://medium.com/@calbertts/docker-and-fuzzy-finder-fzf-4c6416f5e0b5">docker</a>, entre outros.</p>
<h2 id="a-filtragem-interativa">A filtragem interativa</h2>
<h3 id="objetivo-geral">Objetivo Geral</h3>
<p>Implementar um programa que opere com stdin/stdout, permitindo a busca interativa por linhas relevantes no conteúdo de entrada.</p>
<h3 id="objetivos-específicos">Objetivos Específicos</h3>
<p>A busca e interface devem ser inteiramente customizáveis, permitindo a utilização <strong>com</strong> e <strong>por</strong> outros programas.</p>
<h3 id="contexto">Contexto</h3>
<p>Nesta seção eu espero duas coisas: o diagrama de contexto e um texto curto descrevendo em mais detalhes o contexto do sistema. Isso inclui as fronteiras do sistema, os sistemas/serviços externos com os quais ele se comunica etc.</p>
<p>Abaixo estão dois exemplos de diagramas de contexto.</p>
<p>O <code>fzf</code> é um processo que vive inteiramente no terminal. Este pode ser invocado pelo usuário de diversas formas:</p>
<ol>
<li>Via um pipe, como método de busca e seleção de output: <code>$ comando1 args | fzf | comando2</code></li>
<li>Diretamente, invocando um comando padrão pré-configurado (por default o <code>find</code>): <code>$ fzf</code></li>
<li>Via subprocesso, quando algum outro processo shell quer aproveitar seu mecanismo de busca e seleção (ou diretamente pelo usuário neste modo: <code>$ comando $(fzf)</code>): <code>kill -9 &lt;tab&gt;</code></li>
<li>Via integração com o próprio shell, a exemplo do <code>bash</code> e <code>zsh</code>: <code>vim **&lt;tab&gt;</code></li>
</ol>
<p><img src="./fzf_context.png" alt="fig1"></p>
<h3 id="containers">Containers</h3>
<p>Por ser uma aplicação shell auto-contida, o <code>fzf</code> não dispõe de muitos containeres. Apenas podemos dividir a parte gráfica da aplicação, a <em>tui</em> (<em>terminal user interface</em>) e sua parte <em>core</em> - o programa de fato.</p>
<p>Funcionalidades como argumentos passados pelo usuário, flags, dentre outros, serão geridas pelo <em>core</em>, via a leitura do comando invocado, em interação direta com o <em>shell</em>. A <em>tui</em> apenas desenha gráficos já enviados pelo <em>core</em>, bem como provê ao usuário feedback para seus filtros, aatual opção selecionada e os previews (enviados prontos pelo <em>core</em>).</p>
<p><img src="./fzf_containers.png" alt="fig2"></p>
<h3 id="componentes">Componentes</h3>
<p>O <code>fzf</code> conta com três componentes principais dentro do seu core: o <em>Terminal</em>, <em>Matcher</em> e o <em>EventBox</em>, porém há muitos outros instanciados na sua execução.</p>
<p>Apesar de ser o <em>Terminal</em> que interpreterá os comandos do usuário, e irá expor comandos de renderização para a <em>tui</em>, estes são intermediados pelo <em>EventBox</em>.</p>
<p>O <em>EventBox</em> é um componente utilitário que detecta pressionamento de teclas e cliques do usuário na interface gráfica. Os eventos então são observados pelo <em>Terminal</em> (aqui dito como o componente interno do <code>fzf</code>), que reage quando algum comando é solicitado por exemplo. Também reage a movimentação do usuário para renderizar novos previews, executar subprocessos, dentre outros.</p>
<p>Detectadas pressionamentos de teclas <em>char</em> diretas, é visto que o usuário está executando uma busca, que então é enviada para o <em>Matcher</em>.</p>
<p>O <em>Matcher</em> é quem de fato faz a comunicação com o algoritmo de busca e devolve resultados para a interface, novamente, via eventos.</p>
<p><img src="./fzf_components.png" alt="fig3"></p>


</article>


<section class="post-nav">
    <ul>
        
        <li>
            <a href="https://joaoarthurbm.github.io/arqsoft-blog/posts/okhttp/"><i class="fa fa-chevron-circle-left"></i> Documentação arquitetural do OkHttp</a>
        </li>
        
        
        <li>
            <a href="https://joaoarthurbm.github.io/arqsoft-blog/posts/fission/">Fission Serverless Platform <i class="fa fa-chevron-circle-right"></i> </a>
        </li>
        
    </ul>
</section>
  
    
    
  





</main>
    <footer>
        <h6>Copyright © Turma de Arquitetura de Software UFCG |
            Rendered by <a href="https://gohugo.io" title="Hugo">Hugo</a> |
            <a href="https://joaoarthurbm.github.io/arqsoft-blogindex.xml">Subscribe </a></h6>
    </footer>
</div>
<script src="https://joaoarthurbm.github.io/arqsoft-blog/js/scripts.js"></script>

</body>

</html>

