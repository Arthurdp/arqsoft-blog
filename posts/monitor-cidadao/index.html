<!doctype html>

<html lang="en">

<head>
  <title>Mini-projeto 1 - Arquitetura de Software</title>
  <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="description" content="Documentação arquitetural produzida pelas turmas de Arquitetura de Software - Computação @ UFCG." />
<meta name="author" content="Example" /><meta property="og:title" content="Mini-projeto 1" />
<meta property="og:description" content="Autor Este documento foi produzido por Beatriz Bezerra de Souza.
 Matrícula: 117110233 Contato: beatriz.souza@ccc.ufcg.edu.br Projeto documentado: https://github.com/analytics-ufcg/monitor-cidadao-dados  Descrição Arquitetural &ndash; Serviço de predição de risco de contratos públicos Este documento descreve parte da arquitetura do projeto Monitor Cidadão." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://joaoarthurbm.github.io/arqsoft-blog/posts/monitor-cidadao/" />
<meta property="article:published_time" content="2019-10-22T00:00:00-03:00" />
<meta property="article:modified_time" content="2019-10-22T00:00:00-03:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Mini-projeto 1"/>
<meta name="twitter:description" content="Autor Este documento foi produzido por Beatriz Bezerra de Souza.
 Matrícula: 117110233 Contato: beatriz.souza@ccc.ufcg.edu.br Projeto documentado: https://github.com/analytics-ufcg/monitor-cidadao-dados  Descrição Arquitetural &ndash; Serviço de predição de risco de contratos públicos Este documento descreve parte da arquitetura do projeto Monitor Cidadão."/>

<meta name="generator" content="Hugo 0.75.1" />
    

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://joaoarthurbm.github.io/arqsoft-blog/fontawesome/css/all.min.css" />
  
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab|Ruda" />
  
  
  <link rel="stylesheet" type="text/css" href="https://joaoarthurbm.github.io/arqsoft-blog/css/styles.css" /></head>

<body>
  <div id="container">
    <header>
      <h1>
                <a href="https://joaoarthurbm.github.io/arqsoft-blog/">Arquitetura de Software</a>
            </h1>

      <ul id="social-media">
             <li>
               <a href="https://github.com/joaoarthurbm/arqsoft-blog" title="GitHub">
               <i class="fab fa-github fa-lg"></i>
               </a>
             </li>
      </ul>
      
      <p><em>Conteúdo produzido pelas turmas de Arquitetura de Software - Computação @ UFCG</em></p>
      
    </header>

    
<nav>
    <ul>
        
    </ul>
</nav>


    <main>




<article>

    <h1>Mini-projeto 1</h1>

    
      <aside>
    <ul>
        <li>
            <time class="post-date" datetime="2019-10-22T00:00:00-03:00">Oct 22, 2019</time>
        </li>
        

        

        <li>5 minutes read</li>
    </ul>
</aside>

    

    


    <hr>
<h1 id="autor">Autor</h1>
<p>Este documento foi produzido por Beatriz Bezerra de Souza.</p>
<ul>
<li>Matrícula: 117110233</li>
<li>Contato: <a href="mailto:beatriz.souza@ccc.ufcg.edu.br">beatriz.souza@ccc.ufcg.edu.br</a></li>
<li>Projeto documentado: <a href="https://github.com/analytics-ufcg/monitor-cidadao-dados">https://github.com/analytics-ufcg/monitor-cidadao-dados</a></li>
</ul>
<h1 id="descrição-arquitetural----serviço-de-predição-de-risco-de-contratos-públicos">Descrição Arquitetural &ndash; Serviço de predição de risco de contratos públicos</h1>
<p>Este documento descreve parte da arquitetura do projeto <a href="https://github.com/analytics-ufcg/monitor-cidadao-dados">Monitor Cidadão</a>. Essa descrição foi baseada principalmente no modelo <a href="https://c4model.com/">C4</a>.</p>
<p>É importante destacar que não será descrita toda a arquitetura do Monitor Cidadão. O foco aqui é a descrição de um serviço específico de predição de risco de contratos públicos.</p>
<h2 id="descrição-geral-sobre-o-monitor-cidadão">Descrição Geral sobre o Monitor Cidadão</h2>
<p>O Monitor Cidadão é um projeto que tem como objetivo &ldquo;possibilitar aos cidadãos o acompanhamento dos contratos realizados pelos municípios dos estados da Paraíba e do Rio Grande do Sul&rdquo;. Mais detalhes sobre o projeto podem ser vistos <a href="https://github.com/analytics-ufcg/monitor-cidadao-dados">neste link</a>.</p>
<h2 id="o-serviço-de-predição-de-risco-de-contratos-públicos">O Serviço de predição de risco de contratos públicos</h2>
<h3 id="objetivo-geral">Objetivo Geral</h3>
<p>Implementar um serviço para receber dados e realizar predição de risco de contratos públicos para serem usados no Monitor Cidadão.</p>
<h3 id="objetivos-específicos">Objetivos Específicos</h3>
<p>Queremos ter acesso a dados, provenientes de diferentes fontes, relacionados a contratos públicos. Além disso, queremos estimar o risco associado a contratos públicos. Para nós, o conceito de risco está associado a chance que um contrato possui de ser <em>rescindido</em>, <em>paralisado</em>, <em>sustado</em> ou <em>impedido</em>. E as características dos contratos são construídas a partir do comportamento passado e dados cadastrais das empresas responsáveis pelos contratos.</p>
<h3 id="contexto">Contexto</h3>
<p>O Monitor Cidadão é composto por três camadas: dados, back-end, e front-end, como apresentado no diagrama de contexto abaixo.</p>
<p>A camada de dados recebe dados de serviços externos, trata os dados recebidos, e realiza previsões sobre os riscos associados a contratos. Atualmente, os provedores de dados para o Monitor Cidadão são Sagres, TCE-RS, IBGE, e Tramita.</p>
<p>O back-end recebe os dados tratados e as previsões e os repassa para o front-end, que exibe as informações em um formato mais compreensível para os usuários.</p>
<p><img src="context.png" alt="fig1"></p>
<h3 id="containers">Containers</h3>
<p>O diagrama abaixo apresenta os containers do Monitor Cidadão. A camada de dados, que contém o serviço de predição que queremos descrever, é composta por cinco componentes: um fetcher, um transformador, um preditor, e dois bancos de dados.</p>
<p>O fetcher, o transformador, e o preditor são sistemas desenvolvidos em R. Os dois bancos de dados são relacionais, fazem uso do postgres. O fetcher é responsável por buscar os dados em suas fontes. O transformador utiliza o tradutor, um serviço interno responsável por traduzir os dados para um formato tabular, e em seguida realiza manipulações, como joins, nos dados. O preditor encapsula diversas funções para a realização das predições em torno dos contratos públicos.</p>
<p>Note que acessos aos bancos de dados são realizados por meio de objetos de acesso a dados (DAO).</p>
<p><img src="containers.png" alt="fig2"></p>
<h4 id="implantação">Implantação</h4>
<p>O diagrama abaixo mostra onde os containers do Monitor Cidadão estão implantados. As fontes de dados são serviços externos. O banco de dados SAGRES está implantado em uma máquina virtual chamada data-lake-mc. Os demais componentes estão implantados em outra máquina virtual chamada monitor-cidadão.</p>
<p><img src="implantacao.png" alt="fig3"></p>
<h3 id="componentes">Componentes</h3>
<p>O diagrama abaixo apresenta os componentes do preditor do Monitor Cidadão: um gerador de features, um seletor de features, um pré-processador, um treinador e um avaliador. Todos estes componentes são desenvolvidos em R.</p>
<p>O gerador de features recebe dados do AL_DB e cria novas features com base em manipulações dos dados existentes. O seletor de features seleciona as features mais recentemente adicionadas no banco de dados MC_DB. O pré-processador recebe as features selecionadas e realiza pré-processamento nos dados: divide os dados em treino e teste e realiza conversões de tipo. O treinador é responsável por treinar modelos do tipo regressão logística e floresta aleatória. O avaliador calcula métricas para os modelos treinados.</p>
<p>Note que as informações referentes à predição: conjunto de features utilizadas, modelos, métricas, são salvos no MC_DB. Acessos aos bancos de dados são realizados por meio de objetos de acesso a dados (DAO).</p>
<p><img src="componentes.png" alt="fig4"></p>
<h3 id="código">Código</h3>
<pre>
Nesta etapa não faremos diagramas que apresentam detalhes da
implementação. Faremos isso mais adiante.
</pre>
<h3 id="visão-de-informação">Visão de Informação</h3>
<p>O diagrama abaixo descreve a máquina de estados dos dados do preditor do Monitor Cidadão. Se formos gerar novas features, saímos do estado inicial (1) para o estado (2), onde os dados estão armazenados no AL_DB. Então executamos o DAO e vamos para o estado (3), onde os dados foram carregados para manipulação. Depois, executamos o gerador de features e vamos para o estado (4), onde temos os dados com as novas features. Executamos o DAO e vamos para o estado (5), onde as features foram armazenadas no MC_DB. Se não formos gerar novas features, saímos do estado inicial (1) para o estado (5), onde as features estão armazenadas no MC_DB.</p>
<p>Do estado (5), executamos o seletor de features e vamos para o estado (6), onde os dados com as features mais recentes foram escolhidos. Depois, executamos o DAO e vamos para o estado (7), onde os dados para manipulação foram carregados. Então executamos o pré-processador e vamos para o estado (8), onde temos os dados balanceados e com tipos adequados. Em seguida, executamos o treinador e vamos para o estado (9), onde temos os modelos treinados. Executamos o avaliador e vamos para o estado (10), onde temos os modelos avaliados. Por fim, executando o DAO, vamos para o estado (11), que é o estado de aceitação, onde os dados do experimento estão armazenados no MC_DB.</p>
<p><img src="estados-preditor.png" alt="fig5"></p>
<h1 id="contribuições-concretas">Contribuições Concretas</h1>
<p>Ao produzir o conteúdo deste post, abri dois PRs para o repositório da camada de dados do Monitor Cidadão. O primeiro PR foi para atualizar o diagrama do fluxo de dados, que se encontra desatualizado no README do repositório. Em 12 de Outubro de 2020, o PR está aberto: <a href="https://github.com/analytics-ufcg/monitor-cidadao-dados/pull/73">https://github.com/analytics-ufcg/monitor-cidadao-dados/pull/73</a>. O segundo PR foi para adicionar um documento de descrição da arquitetura do preditor do Monitor Cidadão de acordo com o modelo C4. Tal documento não existia no projeto. Em 12 de Outubro de 2020, o PR está aberto: <a href="https://github.com/analytics-ufcg/monitor-cidadao-dados/pull/74">https://github.com/analytics-ufcg/monitor-cidadao-dados/pull/74</a>.</p>


</article>


<section class="post-nav">
    <ul>
        
        <li>
            <a href="https://joaoarthurbm.github.io/arqsoft-blog/posts/momentjs/"><i class="fa fa-chevron-circle-left"></i> Moment Js</a>
        </li>
        
        
        <li>
            <a href="https://joaoarthurbm.github.io/arqsoft-blog/posts/documento-guia/">Exemplo de documento a ser produzido <i class="fa fa-chevron-circle-right"></i> </a>
        </li>
        
    </ul>
</section>
  
    
    
  





</main>
    <footer>
        <h6>Copyright © Turma de Arquitetura de Software UFCG |
            Rendered by <a href="https://gohugo.io" title="Hugo">Hugo</a> |
            <a href="https://joaoarthurbm.github.io/arqsoft-blogindex.xml">Subscribe </a></h6>
    </footer>
</div>
<script src="https://joaoarthurbm.github.io/arqsoft-blog/js/scripts.js"></script>

</body>

</html>

